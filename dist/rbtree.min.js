!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.RBTree=t()}}(function(){return function t(r,e,i){function o(s,l){if(!e[s]){if(!r[s]){var u="function"==typeof require&&require;if(!l&&u)return u(s,!0);if(n)return n(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=e[s]={exports:{}};r[s][0].call(c.exports,function(t){var e=r[s][1][t];return o(e?e:t)},c,c.exports,t,r,e,i)}return e[s].exports}for(var n="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,r,e){function i(t){this.data=t,this.left=null,this.right=null,this.red=!0}function o(t){this._root=null,this._comparator=t,this.size=0}function n(t){return null!==t&&t.red}function s(t,r){var e=t.get_child(!r);return t.set_child(!r,e.get_child(r)),e.set_child(r,t),t.red=!0,e.red=!1,e}function l(t,r){return t.set_child(!r,s(t.get_child(!r),!r)),s(t,r)}var u=t("./treebase");i.prototype.get_child=function(t){return t?this.right:this.left},i.prototype.set_child=function(t,r){t?this.right=r:this.left=r},o.prototype=new u,o.prototype.insert=function(t){var r=!1;if(null===this._root)this._root=new i(t),r=!0,this.size++;else{var e=new i(void 0),o=0,u=0,h=null,c=e,a=null,f=this._root;for(c.right=this._root;;){if(null===f?(f=new i(t),a.set_child(o,f),r=!0,this.size++):n(f.left)&&n(f.right)&&(f.red=!0,f.left.red=!1,f.right.red=!1),n(f)&&n(a)){var _=c.right===h;f===a.get_child(u)?c.set_child(_,s(h,!u)):c.set_child(_,l(h,!u))}var d=this._comparator(f.data,t);if(0===d)break;u=o,o=0>d,null!==h&&(c=h),h=a,a=f,f=f.get_child(o)}this._root=e.right}return this._root.red=!1,r},o.prototype.remove=function(t){if(null===this._root)return!1;var r=new i(void 0),e=r;e.right=this._root;for(var o=null,u=null,h=null,c=1;null!==e.get_child(c);){var a=c;u=o,o=e,e=e.get_child(c);var f=this._comparator(t,e.data);if(c=f>0,0===f&&(h=e),!n(e)&&!n(e.get_child(c)))if(n(e.get_child(!c))){var _=s(e,c);o.set_child(a,_),o=_}else if(!n(e.get_child(!c))){var d=o.get_child(!a);if(null!==d)if(n(d.get_child(!a))||n(d.get_child(a))){var p=u.right===o;n(d.get_child(a))?u.set_child(p,l(o,a)):n(d.get_child(!a))&&u.set_child(p,s(o,a));var g=u.get_child(p);g.red=!0,e.red=!0,g.left.red=!1,g.right.red=!1}else o.red=!1,d.red=!0,e.red=!0}}return null!==h&&(h.data=e.data,o.set_child(o.right===e,e.get_child(null===e.left)),this.size--),this._root=r.right,null!==this._root&&(this._root.red=!1),null!==h},r.exports=o},{"./treebase":2}],2:[function(t,r,e){function i(){}function o(t){this._tree=t,this._ancestors=[],this._cursor=null}i.prototype.clear=function(){this._root=null,this.size=0},i.prototype.find=function(t){for(var r=this._root;null!==r;){var e=this._comparator(t,r.data);if(0===e)return r.data;r=r.get_child(e>0)}return null},i.prototype.findIter=function(t){for(var r=this._root,e=this.iterator();null!==r;){var i=this._comparator(t,r.data);if(0===i)return e._cursor=r,e;e._ancestors.push(r),r=r.get_child(i>0)}return null},i.prototype.lowerBound=function(t){for(var r=this._root,e=this.iterator(),i=this._comparator;null!==r;){var o=i(t,r.data);if(0===o)return e._cursor=r,e;e._ancestors.push(r),r=r.get_child(o>0)}for(var n=e._ancestors.length-1;n>=0;--n)if(r=e._ancestors[n],i(t,r.data)<0)return e._cursor=r,e._ancestors.length=n,e;return e._ancestors.length=0,e},i.prototype.upperBound=function(t){for(var r=this.lowerBound(t),e=this._comparator;null!==r.data()&&0===e(r.data(),t);)r.next();return r},i.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},i.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},i.prototype.iterator=function(){return new o(this)},i.prototype.each=function(t){for(var r,e=this.iterator();null!==(r=e.next());)if(t(r)===!1)return},i.prototype.reach=function(t){for(var r,e=this.iterator();null!==(r=e.prev());)if(t(r)===!1)return},o.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},o.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else if(null===this._cursor.right){var r;do{if(r=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===r)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},o.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else if(null===this._cursor.left){var r;do{if(r=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===r)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},o.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},o.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},r.exports=i},{}]},{},[1])(1)});