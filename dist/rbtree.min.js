RBTree=function(){var m=function(f){f=m.m[f];if(f.mod)return f.mod.exports;var b=f.mod={exports:{}};f(b,b.exports);return b.exports};m.m={};m.m["./treebase"]=function(f){function b(){}function c(a){this._tree=a;this._ancestors=[];this._cursor=null}b.prototype.clear=function(){this._root=null;this.size=0};b.prototype.find=function(a){for(var c=this._root;null!==c;){var b=this._comparator(a,c.data);if(0===b)return c.data;c=c.get_child(0<b)}return null};b.prototype.min=function(){var a=this._root;if(null===
a)return null;for(;null!==a.left;)a=a.left;return a.data};b.prototype.max=function(){var a=this._root;if(null===a)return null;for(;null!==a.right;)a=a.right;return a.data};b.prototype.iterator=function(){return new c(this)};b.prototype.each=function(a){for(var c=this.iterator(),b;null!==(b=c.next());)a(b)};b.prototype.reach=function(a){for(var c=this.iterator(),b;null!==(b=c.prev());)a(b)};c.prototype.data=function(){return null!==this._cursor?this._cursor.data:null};c.prototype.next=function(){if(null===
this._cursor){var a=this._tree._root;null!==a&&this._minNode(a)}else if(null===this._cursor.right){do if(a=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===a)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null};c.prototype.prev=function(){if(null===this._cursor){var a=this._tree._root;null!==a&&this._maxNode(a)}else if(null===this._cursor.left){do if(a=
this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===a)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null};c.prototype._minNode=function(a){for(;null!==a.left;)this._ancestors.push(a),a=a.left;this._cursor=a};c.prototype._maxNode=function(a){for(;null!==a.right;)this._ancestors.push(a),a=a.right;this._cursor=a};f.exports=b};m.m["./node"]=function(f){function b(c){this.data=
c;this.right=this.left=null;this.red=!0}b.prototype.get_child=function(c){return c?this.right:this.left};b.prototype.set_child=function(c,a){c?this.right=a:this.left=a};f.exports=b};m.m.__main__=function(f){function b(a){this._root=null;this._comparator=a;this.size=0}function c(a){return null!==a&&a.red}function a(a,c){var b=a.get_child(!c);a.set_child(!c,b.get_child(c));b.set_child(c,a);a.red=!0;b.red=!1;return b}function p(c,b){c.set_child(!b,a(c.get_child(!b),!b));return a(c,b)}var q=m("./treebase"),
n=m("./node");b.prototype=new q;b.prototype.insert=function(b){var f=!1;if(null===this._root)this._root=new n(b),f=!0,this.size++;else{var e=new n(void 0),h=0,j=0,k=null,i=e,g=null,d=this._root;for(i.right=this._root;;){null===d?(d=new n(b),g.set_child(h,d),f=!0,this.size++):c(d.left)&&c(d.right)&&(d.red=!0,d.left.red=!1,d.right.red=!1);if(c(d)&&c(g)){var l=i.right===k;d===g.get_child(j)?i.set_child(l,a(k,!j)):i.set_child(l,p(k,!j))}l=this._comparator(d.data,b);if(0===l)break;j=h;h=0>l;null!==k&&
(i=k);k=g;g=d;d=d.get_child(h)}this._root=e.right}this._root.red=!1;return f};b.prototype.remove=function(b){if(null===this._root)return!1;var f=new n(void 0),e=f;e.right=this._root;for(var h=null,j=null,k=null,i=1;null!==e.get_child(i);){var g=i,j=h,h=e,e=e.get_child(i),d=this._comparator(b,e.data),i=0<d;0===d&&(k=e);if(!c(e)&&!c(e.get_child(i)))if(c(e.get_child(!i)))j=a(e,i),h.set_child(g,j),h=j;else if(!c(e.get_child(!i))&&(d=h.get_child(!g),null!==d))if(!c(d.get_child(!g))&&!c(d.get_child(g)))h.red=
!1,d.red=!0,e.red=!0;else{var l=j.right===h;c(d.get_child(g))?j.set_child(l,p(h,g)):c(d.get_child(!g))&&j.set_child(l,a(h,g));g=j.get_child(l);g.red=!0;e.red=!0;g.left.red=!1;g.right.red=!1}}null!==k&&(k.data=e.data,h.set_child(h.right===e,e.get_child(null===e.left)),this.size--);this._root=f.right;null!==this._root&&(this._root.red=!1);return null!==k};f.exports=b};return m("__main__")}(window);
